FROM ubuntu:22.04

LABEL maintainer="Rafael Sene rafael@riscv.org"

WORKDIR /build

RUN apt-get update \
  && apt-get install -y --no-install-recommends \
    bison \
    build-essential \
    cmake \
    curl \
    flex \
    fonts-lyx \
    git \
    graphviz \
    default-jre \
    libcairo2-dev \
    libffi-dev \
    libgdk-pixbuf2.0-dev \
    libpango1.0-dev \
    libxml2-dev \
    make \
    pkg-config \
    python-pip \
    ruby \
    ruby-dev \
    libgif-dev \
    libwebp-dev \
    libzstd-dev \
    ruby-full \
    npm \
    texlive-latex-base \
    texlive-fonts-recommended \
    texlive-fonts-extra \
    texlive-latex-extra \
    texlive-science \
  && apt-get autoclean \
  && apt-get autoremove \
  && rm -rf /var/lib/apt/lists/*

RUN export DEBIAN_FRONTEND=noninteractive \
  && pip3 install --no-cache-dir \
    sympy \
    pyyaml \
    jsonschema

RUN gem install --no-document \
    asciidoctor \
    asciidoctor-bibtex \
    asciidoctor-diagram \
    asciidoctor-mathematical \
    asciidoctor-pdf \
    citeproc-ruby \
    coderay \
    csl-styles \
    json \
    pygments.rb \
    rghost \
    rouge \
    ruby_dev

RUN npm install -g --no-cache \
    wavedrom-cli \
    bytefield-svg
